<!doctype html>
<head>
  <meta charset="utf-8">

  <title>My Parse App</title>
  <meta name="description" content="studyNow App">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.3.5.min.js"></script>
</head>

<body>
  
  <div id="main">
    <h1>Welcome to studyNow!</h1>

    <p>Tell us where you're studying in the textbox below! </p>


    <div style="display:none" class="error">
      Looks like there was a problem saving the test object. Make sure you've set your application ID and javascript key correctly in the call to <code>Parse.initialize</code> in this file.
    </div>

    
  </div>
<div id="mapholder"></div>
  

  <script src="http://maps.google.com/maps/api/js?sensor=false"></script>

  <input name="Location" type="textbox" placeholder="Description?" id='descrString'></input>
  <input name="qChairs" type ="textbox" placeholder="Number of chairs?" id='aChairs'></input>
  <input name="qTables" type ="textbox" placeholder="Number of tables?" id='aTables'></input>
  <input name="qOutlets" type ="textbox" placeholder="Number of outlets?" id='aOutlets'></input>
  <input onclick="getLocation()" type="button" value="Submit" style="width:10%"></input>

<p id="demo"></p>

<script type="text/javascript">
    Parse.initialize("I64ZcYApHwIZ16xBWWkjF5J8jrFSbNG7Nn5pRWlD", "FHrV7K6okKiPUULrFxHSJtuTAV5Nllbn1zQOLBv8");
</script>


    
    <script>
var x = document.getElementById("demo");
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else { 
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
    lat = position.coords.latitude;
    lon = position.coords.longitude;
    latlon = new google.maps.LatLng(lat, lon)
    mapholder = document.getElementById('mapholder')
    mapholder.style.height = '250px';
    mapholder.style.width = '500px';

    var myOptions = {
    center:latlon,zoom:14,
    mapTypeId:google.maps.MapTypeId.ROADMAP,
    mapTypeControl:false,
    navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}
    }
    
    var map = new google.maps.Map(document.getElementById("mapholder"), myOptions);
    var marker = new google.maps.Marker({position:latlon,map:map,title:"You are here!"});

    function addLocation(lat, lon){
      var StudySpace = Parse.Object.extend("StudySpace");
      var studySpace = new StudySpace();      

      studySpace.save({coor: new Parse.GeoPoint({latitude: lat, longitude: lon}), descri: document.getElementById('descrString').value, numChairs: document.getElementById('aChairs').value, numTables: document.getElementById('aTables').value, numOutlets: document.getElementById('aOutlets').value}).then(function(object) {
  alert("yay! it worked");
});

    }

   /* <script>
var TestObject = Parse.Object.extend("TestObject");
var testObject = new TestObject();
testObject.save({foo: "bar"}).then(function(object) {
  alert("yay! it worked");
});
*/

    addLocation(lat, lon);

}

function showError(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            x.innerHTML = "User denied the request for Geolocation."
            break;
        case error.POSITION_UNAVAILABLE:
            x.innerHTML = "Location information is unavailable."
            break;
        case error.TIMEOUT:
            x.innerHTML = "The request to get user location timed out."
            break;
        case error.UNKNOWN_ERROR:
            x.innerHTML = "An unknown error occurred."
            break;
    }
}
        

    
  
    
</script>

    
    
    
    


</body>

</html>

